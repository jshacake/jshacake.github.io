---
title:  "DES 구현일지"
excerpt: "C언어로 DES를 구현해보려 한다."

categories:
  - Blog
tags:
  - Blog
last_modified_at: 2021-03-19T08:06:00-05:00
---

## Objective

1. DES의 Encryption, Decryption, Key Schedule을 구현한다.
2. 블록암호 모드를 구현한다.
3. 파일 입출력 시 파일을 보호해본다.
4. (가능하다면) Cryptanalysis 시도해본다.



## What's going on

- 18 Mar 2021

  - Initial Permutation을 구현하는 방법을 생각해냈다.
    - 그냥 Permutation Table 보니까 일정한 규칙이 보이길래 퍼뜩 떠올라서 구현했다.

  ```c
  void initial_permutation(unsigned char r[8])
  {
  	r[0] |= ( ( p[7] >> 6 ) & 1 ) << 7;
  	r[0] |= ( ( p[6] >> 6 ) & 1 ) << 6;
  	r[0] |= ( ( p[5] >> 6 ) & 1 ) << 5;
  	r[0] |= ( ( p[4] >> 6 ) & 1 ) << 4;
  	r[0] |= ( ( p[3] >> 6 ) & 1 ) << 3;
  	r[0] |= ( ( p[2] >> 6 ) & 1 ) << 2;
  	r[0] |= ( ( p[1] >> 6 ) & 1 ) << 1;
  	r[0] |= ( ( p[0] >> 6 ) & 1 );
  	
  	r[1] |= ( ( p[7] >> 4 ) & 1 ) << 7;
  	r[1] |= ( ( p[6] >> 4 ) & 1 ) << 6;
  	r[1] |= ( ( p[5] >> 4 ) & 1 ) << 5;
  	r[1] |= ( ( p[4] >> 4 ) & 1 ) << 4;
  	r[1] |= ( ( p[3] >> 4 ) & 1 ) << 3;
  	r[1] |= ( ( p[2] >> 4 ) & 1 ) << 2;
  	r[1] |= ( ( p[1] >> 4 ) & 1 ) << 1;
  	r[1] |= ( ( p[0] >> 4 ) & 1 );
  	
      // 이하 생략
  	...
          
  }
  ```

  

  - Skeleton Code를 전부 적어놓고 하는 편이 나을 것 같다고 생각했다.
  - 함수 인자에 대해 좀 고민해보고 설계해야겠다.
    - 각각 함수에 ``return value``에 해당하는 변수를 넣고 실제 함수 리턴 값은 void로 해야함.
      - C 언어에서 배열 포인터 왔다갔다 하는거 너무 빡세기 때문...
      - 사실 return 으로 배열을 못 준다는게 너무 직관적이지 않아서
      - 그냥 좀 코드 길어지거나 지저분해져도 최대한 정리하고 그런 식으로 만들겠음.